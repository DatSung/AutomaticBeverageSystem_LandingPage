---
import { API_URL } from '@constants/apiUrl'

interface Benefit {
  benefitId: string;
  benefitTitle: string;
  benefitDescription: string;
  iconUrl: string;
  sortOrder: number;
  isPublicVisible: boolean;
}

let benefits: Benefit[] = [];

try {
  const res = await fetch(API_URL.benefits.gets);
  const json = await res.json();
  benefits = json.response.items ?? [];
} catch (error) {
  console.error("Error fetching benefits:", error);
}
---

<section class="relative py-20 px-4 bg-gradient-to-br from-cyan-50 via-white to-blue-50 overflow-hidden">
  <!-- Background decorations -->
  <div class="absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(251,146,60,0.08),transparent_60%)]"></div>
  <div class="absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(245,158,11,0.06),transparent_60%)]"></div>
  
  <!-- Floating elements -->
  <div class="absolute top-20 left-10 w-16 h-16 bg-cyan-200/30 rounded-full blur-xl"></div>
  <div class="absolute bottom-20 right-16 w-24 h-24 bg-blue-200/20 rounded-full blur-xl"></div>

  <div class="relative z-10">
    <!-- Enhanced Header -->
    <div class="max-w-4xl mx-auto mb-16 text-center">
      <div class="inline-flex items-center px-4 py-2 bg-cyan-100/80 backdrop-blur-sm text-cyan-700 rounded-full text-sm font-medium mb-6 shadow-sm border border-cyan-200/50">
        <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
          <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
        </svg>
        Lợi ích vượt trội
      </div>
      
      <h2 class="text-4xl md:text-5xl lg:text-6xl font-bold mb-6 text-gray-900 leading-tight">
        Tiện ích và 
        <span class="bg-gradient-to-r from-cyan-600 to-blue-600 bg-clip-text text-transparent">tính năng vượt trội</span>
      </h2>
      
      <p class="text-xl md:text-2xl text-gray-600 max-w-4xl mx-auto leading-relaxed">
        Máy bán hàng tự động ABS đã trở thành giải pháp tối ưu cho doanh nghiệp hiện đại, 
        hỗ trợ thanh toán linh hoạt, giám sát từ xa và quản lý hiệu quả mọi lúc mọi nơi.
      </p>
    </div>

    <!-- Benefits Grid -->
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-8 max-w-7xl mx-auto">
      {
        benefits.map((item, index) => (
          <div 
            class="group relative bg-white/90 backdrop-blur-sm rounded-3xl p-8 shadow-xl hover:shadow-2xl transition-all duration-500 hover:-translate-y-3 border border-cyan-100/50 overflow-hidden"
            style={`animation-delay: ${index * 100}ms`}
          >
            <!-- Animated gradient background -->
            <div class="absolute inset-0 bg-gradient-to-br from-cyan-50/50 via-blue-50/30 to-blue-50/50 opacity-0 group-hover:opacity-100 transition-all duration-500"></div>
            
            <!-- Glowing border effect -->
            <div class="absolute inset-0 rounded-3xl bg-gradient-to-r from-cyan-300/20 via-blue-300/20 to-blue-300/20 opacity-0 group-hover:opacity-100 transition-opacity duration-500 blur-sm"></div>
            
            <div class="relative z-10 flex flex-col items-center text-center">
              <!-- Enhanced Icon Container -->
              <div class="relative mb-6">
                <div class="w-24 h-24 bg-gradient-to-br from-cyan-100 to-blue-100 rounded-2xl flex items-center justify-center group-hover:scale-110 group-hover:rotate-2 transition-all duration-300 shadow-lg">
                  <img
                    src={item.iconUrl}
                    alt={item.benefitTitle}
                    class="w-12 h-12 object-contain group-hover:scale-105 transition-transform duration-300"
                    loading="lazy"
                  />
                </div>
                
                <!-- Decorative dots -->
                <div class="absolute -top-2 -right-2 w-3 h-3 bg-cyan-400 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-500 animate-ping"></div>
                <div class="absolute -bottom-2 -left-2 w-2 h-2 bg-cyan-400 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-700"></div>
              </div>

              <!-- Title -->
              <h3 class="text-lg font-bold text-gray-900 mb-4 group-hover:text-blue-700 transition-colors duration-300 leading-snug">
                {item.benefitTitle}
              </h3>

              <!-- Description -->
              <p class="text-sm text-gray-600 leading-relaxed group-hover:text-gray-700 transition-colors duration-300">
                {item.benefitDescription}
              </p>
            </div>

            <!-- Shine effect -->
            <div class="absolute inset-0 rounded-3xl bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000 ease-out"></div>
          </div>
        ))
      }
    </div>
  </div>
</section>

<style>
  .group {
    animation: slideUp 0.6s ease-out forwards;
    opacity: 0;
    transform: translateY(30px);
  }
  
  @keyframes slideUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>